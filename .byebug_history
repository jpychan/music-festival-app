continue
@first_five_results[0]
@first_five_results
next
quit
@first_five_results[i][:agent] = agents.select { |agent| agent["Id"] == agent_id }
 @first_five_results[i][:departure_carrier] = carriers.select { |carrier| carrier["Id"] == departure_carrier_id }
departure_carrier_id = @first_five_results[i][:outbound_leg]["Carriers"][0]
@first_five_results[0][:departure_airport] = places.select { |place| place["Id"] == departure_airport_id }[0]
@first_five_results[0][:departure_airport] = places.select { |place| place["Id"] == departure_airport_id }
@first_five_results[0][:outbound_leg]["Carriers"][0]
@first_five_results[0][:outbound_leg]["Carriers"]
departure_carrier_id
next
arrival_airport_id
next
departure_airport_id
next
@first_five_results[0][:inbound_leg]
next
@first_five_results[0][:outbound_leg]
next
@first_five_results
agents
query
places
carriers
legs
quit
@results["Carriers"][0]
@results["Carriers"]
@results = JSON.parse(@results)
@results["Carriers"]
@results
legs
continue
next
quit
      departure_airport_id = @first_five_results[i][:outbound_leg]["OriginStation"]
      departure_airport_id = @first_five_results[i][:outbound_leg][0]["OriginStation"]
      @first_five_results[i][:outbound_leg] = legs.select { |leg| leg["Id"] == outbound_leg_id}[0]
@first_five_results[0][:outbound_leg]
@first_five_results[0][:outbound_leg][0]["OriginStation"]
legs.select { |leg| leg["Id"] == inbound_leg_id}[0]
legs.select { |leg| leg["Id"] == outbound_leg_id}[0]
legs.select { |leg| leg["Id"] == outbound_leg_id}
legs.select { |leg| leg["Id"] == @results["Itineraries"][0]["OutboundLegId"] }legs.select { |leg| leg["Id"] == outbound_leg_id}
legs.select { |leg| leg["Id"] == @results["Itineraries"][0]["OutboundLegId"] }
@first_five_results[i]["PricingOptions"][0]["Agents"][0]
@first_five_results[0]["PricingOptions"][0]["Agents"]
@first_five_results[0]["PricingOptions"]["Agents"]
quit
legs = JsonPath.on(@results, '$.Legs').flatten
continue
@first_five_results.class
quit
@first_five_results.to_json
@first_five_results.class
continue
@first_five_results
first_five_results
continue
quit
      @first_five_results[i][:agent] = JsonPath.on(agents, "$..[?(@.Id==#{agent_id})]")
    agents = JsonPath.on(@results, '$..Agents')[0]
    agents = JsonPath.on(@aresults, '$..Agents')
    agents = JsonPath.on(@aresults, '$..Agents')[0]
agents
agent_id
 @first_five_results[i][:agent] = JsonPath.on(agents, "$..[?(@.Id==#{agent_id})]")
      @first_five_results[i][:booking_url] = JsonPath.on(@first_five_results[0], '$..DeeplinkUrl')
      @first_five_results[i][:booking_url] = JsonPath.on(@first_five_results[0], '$.DeeplinkUrl')
      @first_five_results[i][:booking_url] = JsonPath.on(@first_five_results[i], '$.DeeplinkUrl')
      @first_five_results[i][:booking_url] = JsonPath.on(@first_five_results[i], '$.DeeplinkUrl')[0]
      @first_five_results[i][:arrival_carrier] = JsonPath.on(carriers, "$..[?(@.Id==#{arrival_carrier_id})]")
arrival_carrier_id = arrival_carrier_id[0]
arrival_carrier_id
      @first_five_results[i][:arrival_carrier] = JsonPath.on(carriers, "$..[?(@.Id==#{arrival_carrier_id})]")
      departure_carrier_id = JsonPath.on(@first_five_results[i][:outbound_leg], '$..CarrierId')
      departure_carrier_id = JsonPath.on(@first_five_results[i][:outbound_leg], '$..CarrierId')[0]
arrival_carrier_id[0]
arrival_carrier_id
quit
    (0..4).each{ |i| puts "#{i}."}
    (0..4).each{ |k| puts "#{k}. Curly braces make it even shorter"}
    (0..4).each { |i| puts '#{i}'}
first_five_results = JsonPath.on(@results, '$..Itineraries[:4]').length
first_five_results.length
    first_five_results[0][:agent] = JsonPath.on(agents, "$..[?(@.Id==#{agent_id})]")
    agent_id = JsonPath.on(first_five_results[0], '$..Agents')[0][0]
    first_five_results[0][:agent] = JsonPath.on(agents, "$..[?(@.Id==#{agent_id})]")
    agent_id = JsonPath.on(first_five_results[0], '$..Agents')[0].flatten
    agent_id = JsonPath.on(first_five_results[0], '$..Agents')[0]
    agent_id = JsonPath.on(first_five_results[0], '$..Agents')
    first_five_results[0][:booking_url] = JsonPath.on(first_five_results[0], '$..DeeplinkUrl')[0]
    first_five_results[0][:booking_url] = JsonPath.on(first_five_results[0], '$..DeeplinkUrl')
    first_five_results[0][:booking_url] = JsonPath.on(first_five_results[0], '$.DeeplinkUrl')
first_five_results[0]["PricingOptio    first_five_results[0][:booking_url] = JsonPath.on(first_five_results[0], "$..DeeplinkUrl")
first_five_results[0]
    departure_airport_id = first_five_results[0][:outbound_leg]["OriginStation"]
    departure_airport_id = first_five_results[0][:outbound_leg][0]["OriginStation"]
    outbound_leg_id = first_five_results[0]["OutboundLegId"]
    legs = JsonPath.on(@results, '$..Legs').flatten
    legs = JsonPath.on(@results, '$..Legs')
    legs = JsonPath.on(@results, '$..Legs').flatten
    legs = JsonPath.on(@results, '$..Legs')
places = JsonPath.on(@results, '$..Places')
    query = JsonPath.on(@results, '$..Query')
    carriers = JsonPath.on(@results, '$..Carriers')[0]
    carriers = JsonPath.on(@results, '$..Carriers')
    carriers = JsonPath.on(@results, '$..Carriers').flatten
    agents = JsonPath.on(@results, '$..Agents')[0]
    agents = JsonPath.on(@results, '$..Agents')
    agents = JsonPath.on(@results, '$..Agents').flatten[0]
    agents = JsonPath.on(@results, '$..Agents').flatten
    agents = JsonPath.on(@results, '$..Agents')
    agents = JsonPath.on(@agents, '$..Agents')
arrival_carrier_id = JsonPath.on(first_five_results[0][:inbound_leg], '$..CarrierId')[0]
    first_five_results[0][:departure_carrier] = JsonPath.on(carriers, "$..[?(@.Id==#{departure_carrier_id})]")
    departure_carrier_id = JsonPath.on(first_five_results[0][:outbound_leg], '$..CarrierId')[0]
    first_five_results[0][:departure_carrier] = JsonPath.on(carriers, "$..[?(@.Id==#{departure_carrier_id})]")
carriers = JsonPath.on(@results, '$..Carriers').flatten
carriers = JsonPath.on(@results, '$..Carriers')
    JsonPath.on(first_five_results[0][:outbound_leg], '$..CarrierId')
    JsonPath.on(first_five_results, '$..CarrierId')[0]
    JsonPath.on(first_five_results, '$..CarrierId')
first_five_results[0][:outbound_leg][0]["FlightNumbers"][0]["CarrierId"]    JsonPath.on(first_five_results, '$..CarrierId')
first_five_results[0][:outbound_leg][0]["FlightNumbers"][0]["CarrierId"]
first_five_results[0][:outbound_leg][0]["FlightNumbers"]["CarrierId"]
first_five_results[0][:outbound_leg][0]["CarrierId"]
first_five_results[0][:outbound_leg]
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==#{first_five_results[0][:outbound_leg][0]["OriginStation"]})]")
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==#{departure_airport_id})]")
puts "My variable is #{departure_airport_id}"
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==18411)]")
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==18411})]")
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==18411}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id=='#{departure_airport_id}')]")
departure_airport_id
next
quit
    first_five_results[0][:outbound_leg] = JsonPath.on(legs, "$..[?(@.Id=='#{outbound_leg_id}')]")
    first_five_results[0][:outbound_leg] = JsonPath.on(legs, "$.Legs[?(@.Id=='#{outbound_leg_id}')]")
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id=='#{departure_airport_id}')]")
places[0]["Id"] == departure_airport_id
places[0]["Id"] == departure_airport_Id
places[0]["Id"].class
places[0]
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==18411)]")
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==departure_airport_id)]")
'#{departure_airport_id}'
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id=='#{departure_airport_id}')]")
departure_airport_id
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id==18411)]")
first_five_results[0][:departure_airport] = JsonPath.on(places, "$..[?(@.Id=='#{departure_airport_id}')]")
places
    places = JsonPath.on(@results, '$..Places').flatten
    places = Jsonpath.on(@results, '$..Places').flatten
places = JsonPath.on(@results, "$.Places")    places = Jsonpath.on(@results, '$..Places').flatten
places[0][0]["Id"]
places[0][0]
places[0]
places.class
places = JsonPath.on(@results, "$.Places")
JsonPath.on(@results, "$.Places[0][0][?(@.Id=='#{departure_airport_id}')]")
JsonPath.on(@results, "$.Places[0][?(@.Id=='#{departure_airport_id}')]")
JsonPath.on(@results, "$..Places[0][?(@.Id=='#{departure_airport_id}')]")
places.flatten
places = JsonPath.on(@results, "$..Places")
JsonPath.on(@results, "$..Places")
JsonPath.on(@results, "$..Places)
JsonPath.on(@results, "$..Places[?(@.Id=='#{departure_airport_id}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Places[?(@.Id=='#{departure_airport_id}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{departure_airport_id}')]")
departure_airport_id
departure_airport_id = first_five_results[0][:outbound_leg][0]["OriginStation"]
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
first_five_results[0][:outbound_leg][0]["OriginStation"]
 departure_airport_id = first_five_results[0][:outbound_leg]["OriginStation"]
first_five_results[0][:outbound_leg]
first_five_results[:outbound_leg]
 departure_airport_id = first_five_results[:outbound_leg]["OriginStation"]
next
 departure_airport_id = first_five_results[:outbound_leg]
 departure_airport_id = first_five_results[:outbound_leg]["OriginStation"]
first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{first_five_results[0][:outbound_leg]["OriginStation"]}')]")
next
nexg
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{first_five_results[0][:outbound_leg]["OriginStation"]}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id=='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$.Places[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Places[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Places[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}']")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Places[?(@.Id='#{first_five_results[0][:outbound_leg]["OriginStation"]}']")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Carriers[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}')]")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Carriers[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}']"))
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Carriers[?(@.Id='#{first_five_results[0][:outbound_leg][0]["OriginStation"]}']")
    first_five_results[0][:departure_airport] = JsonPath.on(@results, "$..Carriers[?(@.Id='#{first_five_results[0][:outbound_leg]["OriginStation"]}']")
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$.Legs[?(@.Id=='#{outbound_leg_id}')]")
JsonPath.on(@results, "$.Legs[?(@.Id='18411-1609140600-WS-1-18467-1609141557')]"first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$.Legs[?(@.Id=='#{outbound_leg_id}')]")
first_five_results[0][:inbound_leg] = JsonPath.on(@results, "$.Legs[?(@.Id=='#{inbound_leg_id}')]")
JsonPath.on(@results, "$.Legs[?(@.Id=='18411-1609140600-WS-1-18467-1609141557')]")
JsonPath.on(@results, "$.Legs[?(@.Id='18411-1609140600-WS-1-18467-1609141557')]")
JsonPath.on(@results, "$.Legs[0][?(@.Id='18411-1609140600-WS-1-18467-1609141557')]")
outbound_leg_id
JsonPath.on(@results, "$.Legs[0][?(@.Id='#{outbound_leg_id}')]")
JsonPath.on(@results, "$.Legs[0]?(@.Id='#{outbound_leg_id}')]")
JsonPath.on(@results, "$.Legs[?(@.Id='#{outbound_leg_id}')]")
legs[0][0]["Id"]
legs[0][0]["Id]
legs[0].length
legs.length
legs.flatten
legs
legs[0]["Id"]
legs["Id"]
first_five_results[0][:outbound_leg] = JsonPath.on(legs, "$..Id='#{outbound_leg_id}'")
JsonPath.on(legs, '$..Id')
first_five_results[0][:outbound_leg] = JsonPath.on(legs, "$..Id='#{outbound_leg_id}'")
@legs.class
first_five_results[0][:outbound_leg] = JsonPath.on(@legs, "$..Id='#{outbound_leg_id}'")
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[?(@.Id)]")
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[0][?(@.Id)]")
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[0][?(@.Id0
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[0][?(@.Id='#{outbound_leg_id}')]")
legs[0].length
legs.length
legs.class
legs
@results["Legs"]
@results[Legs]
@results["Legs"][0]
@results["Legs"][0][0]
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[0][?(@.Id='#{outbound_leg_id}')]")
first_five_results[0][:outbound_leg]
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[?(@.Id='#{outbound_leg_id}')]")
first_five_results[0][:outbound_leg] = JsonPath.on(@results, "$..Legs[?(@.Id='#{outbound_leg_id}')]"))
JsonPath.on(@results, '$..Legs[?(@.Id=#{outbound_leg_id})]')
JsonPath.on(@results, '$..Id')
JsonPath.on('$..Id')
JsonPath.on('$..Legs[0]["Id"]')
first_five_results[0]["OutboundLegId"]
first_five_results[0]
JsonPath.on(@results, '$..Legs[?@.Id =18411-1609140600-WS-1-18467-1609141557]')
JsonPath.on(@results, '$..Legs[?@.Id ="18411-1609140600-WS-1-18467-1609141557"]')
JsonPath.on(@results, '$..Legs[0]')
JsonPath.on(@results, '$..Legs[?@.Id ="18411-1609140600-WS-1-18467-1609141557"]')
JsonPath.on(@results, '$..Legs[0][?@.Id ="18411-1609140600-WS-1-18467-1609141557"]')
legs[0]
JsonPath.on(@results, '$..Legs[?@.Id =#{outbound_leg_id}]')
test[0]["Id"] == outbound_leg_id
test.length
test.length == outbound_leg_id.length
test == outbound_leg_id
test[0]["Id"].class
